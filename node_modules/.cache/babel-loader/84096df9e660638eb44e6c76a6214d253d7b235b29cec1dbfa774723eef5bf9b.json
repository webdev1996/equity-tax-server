{"ast":null,"code":"import axios from'axios';// API Configuration\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';const API_TIMEOUT=parseInt(process.env.REACT_APP_API_TIMEOUT||'10000');// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,timeout:API_TIMEOUT,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Response interceptor to handle errors\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Unauthorized - clear token and redirect to login\nlocalStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(error);});// API Endpoints\nexport const authAPI={login:(email,password)=>api.post('/auth/login',{email,password}),signup:userData=>api.post('/auth/signup',userData),logout:()=>api.post('/auth/logout'),refreshToken:()=>api.post('/auth/refresh'),forgotPassword:email=>api.post('/auth/forgot-password',{email}),resetPassword:(token,password)=>api.post('/auth/reset-password',{token,password})};export const userAPI={getProfile:()=>api.get('/user/profile'),updateProfile:data=>api.put('/user/profile',data),changePassword:data=>api.put('/user/change-password',data),uploadAvatar:file=>{const formData=new FormData();formData.append('avatar',file);return api.post('/user/avatar',formData,{headers:{'Content-Type':'multipart/form-data'}});}};export const taxAPI={getReturns:()=>api.get('/tax/returns'),getReturn:id=>api.get(\"/tax/returns/\".concat(id)),createReturn:data=>api.post('/tax/returns',data),updateReturn:(id,data)=>api.put(\"/tax/returns/\".concat(id),data),submitReturn:id=>api.post(\"/tax/returns/\".concat(id,\"/submit\")),deleteReturn:id=>api.delete(\"/tax/returns/\".concat(id)),downloadReturn:id=>api.get(\"/tax/returns/\".concat(id,\"/download\"),{responseType:'blob'})};export const documentAPI={getDocuments:returnId=>api.get('/documents',{params:{returnId}}),uploadDocument:(file,returnId)=>{const formData=new FormData();formData.append('document',file);if(returnId)formData.append('returnId',returnId);return api.post('/documents',formData,{headers:{'Content-Type':'multipart/form-data'}});},deleteDocument:id=>api.delete(\"/documents/\".concat(id)),downloadDocument:id=>api.get(\"/documents/\".concat(id,\"/download\"),{responseType:'blob'})};export const adminAPI={getUsers:params=>api.get('/admin/users',{params}),getUser:id=>api.get(\"/admin/users/\".concat(id)),updateUser:(id,data)=>api.put(\"/admin/users/\".concat(id),data),deleteUser:id=>api.delete(\"/admin/users/\".concat(id)),getReturns:params=>api.get('/admin/returns',{params}),reviewReturn:(id,action,comment)=>api.post(\"/admin/returns/\".concat(id,\"/review\"),{action,comment}),getAnalytics:params=>api.get('/admin/analytics',{params}),getSettings:()=>api.get('/admin/settings'),updateSettings:data=>api.put('/admin/settings',data)};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","API_TIMEOUT","parseInt","REACT_APP_API_TIMEOUT","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authAPI","login","email","password","post","signup","userData","logout","refreshToken","forgotPassword","resetPassword","userAPI","getProfile","get","updateProfile","data","put","changePassword","uploadAvatar","file","formData","FormData","append","taxAPI","getReturns","getReturn","id","createReturn","updateReturn","submitReturn","deleteReturn","delete","downloadReturn","responseType","documentAPI","getDocuments","returnId","params","uploadDocument","deleteDocument","downloadDocument","adminAPI","getUsers","getUser","updateUser","deleteUser","reviewReturn","action","comment","getAnalytics","getSettings","updateSettings"],"sources":["D:/Cursor/Equity Tax/src/utils/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\n// API Configuration\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\nconst API_TIMEOUT = parseInt(process.env.REACT_APP_API_TIMEOUT || '10000');\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: API_TIMEOUT,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle errors\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Unauthorized - clear token and redirect to login\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// API Endpoints\r\nexport const authAPI = {\r\n  login: (email: string, password: string) =>\r\n    api.post('/auth/login', { email, password }),\r\n  signup: (userData: any) =>\r\n    api.post('/auth/signup', userData),\r\n  logout: () =>\r\n    api.post('/auth/logout'),\r\n  refreshToken: () =>\r\n    api.post('/auth/refresh'),\r\n  forgotPassword: (email: string) =>\r\n    api.post('/auth/forgot-password', { email }),\r\n  resetPassword: (token: string, password: string) =>\r\n    api.post('/auth/reset-password', { token, password }),\r\n};\r\n\r\nexport const userAPI = {\r\n  getProfile: () =>\r\n    api.get('/user/profile'),\r\n  updateProfile: (data: any) =>\r\n    api.put('/user/profile', data),\r\n  changePassword: (data: any) =>\r\n    api.put('/user/change-password', data),\r\n  uploadAvatar: (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append('avatar', file);\r\n    return api.post('/user/avatar', formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' },\r\n    });\r\n  },\r\n};\r\n\r\nexport const taxAPI = {\r\n  getReturns: () =>\r\n    api.get('/tax/returns'),\r\n  getReturn: (id: string) =>\r\n    api.get(`/tax/returns/${id}`),\r\n  createReturn: (data: any) =>\r\n    api.post('/tax/returns', data),\r\n  updateReturn: (id: string, data: any) =>\r\n    api.put(`/tax/returns/${id}`, data),\r\n  submitReturn: (id: string) =>\r\n    api.post(`/tax/returns/${id}/submit`),\r\n  deleteReturn: (id: string) =>\r\n    api.delete(`/tax/returns/${id}`),\r\n  downloadReturn: (id: string) =>\r\n    api.get(`/tax/returns/${id}/download`, { responseType: 'blob' }),\r\n};\r\n\r\nexport const documentAPI = {\r\n  getDocuments: (returnId?: string) =>\r\n    api.get('/documents', { params: { returnId } }),\r\n  uploadDocument: (file: File, returnId?: string) => {\r\n    const formData = new FormData();\r\n    formData.append('document', file);\r\n    if (returnId) formData.append('returnId', returnId);\r\n    return api.post('/documents', formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' },\r\n    });\r\n  },\r\n  deleteDocument: (id: string) =>\r\n    api.delete(`/documents/${id}`),\r\n  downloadDocument: (id: string) =>\r\n    api.get(`/documents/${id}/download`, { responseType: 'blob' }),\r\n};\r\n\r\nexport const adminAPI = {\r\n  getUsers: (params?: any) =>\r\n    api.get('/admin/users', { params }),\r\n  getUser: (id: string) =>\r\n    api.get(`/admin/users/${id}`),\r\n  updateUser: (id: string, data: any) =>\r\n    api.put(`/admin/users/${id}`, data),\r\n  deleteUser: (id: string) =>\r\n    api.delete(`/admin/users/${id}`),\r\n  getReturns: (params?: any) =>\r\n    api.get('/admin/returns', { params }),\r\n  reviewReturn: (id: string, action: 'approve' | 'reject', comment?: string) =>\r\n    api.post(`/admin/returns/${id}/review`, { action, comment }),\r\n  getAnalytics: (params?: any) =>\r\n    api.get('/admin/analytics', { params }),\r\n  getSettings: () =>\r\n    api.get('/admin/settings'),\r\n  updateSettings: (data: any) =>\r\n    api.put('/admin/settings', data),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}