{"ast":null,"code":"import axios from 'axios';\n\n// API Configuration\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\nconst API_TIMEOUT = parseInt(process.env.REACT_APP_API_TIMEOUT || '10000');\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: API_TIMEOUT,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle errors\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    // Unauthorized - clear token and redirect to login\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// API Endpoints\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', {\n    email,\n    password\n  }),\n  signup: userData => api.post('/auth/signup', userData),\n  logout: () => api.post('/auth/logout'),\n  refreshToken: () => api.post('/auth/refresh'),\n  forgotPassword: email => api.post('/auth/forgot-password', {\n    email\n  }),\n  resetPassword: (token, password) => api.post('/auth/reset-password', {\n    token,\n    password\n  })\n};\nexport const userAPI = {\n  getProfile: () => api.get('/user/profile'),\n  updateProfile: data => api.put('/user/profile', data),\n  changePassword: data => api.put('/user/change-password', data),\n  uploadAvatar: file => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    return api.post('/user/avatar', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n};\nexport const taxAPI = {\n  getReturns: () => api.get('/tax/returns'),\n  getReturn: id => api.get(`/tax/returns/${id}`),\n  createReturn: data => api.post('/tax/returns', data),\n  updateReturn: (id, data) => api.put(`/tax/returns/${id}`, data),\n  submitReturn: id => api.post(`/tax/returns/${id}/submit`),\n  deleteReturn: id => api.delete(`/tax/returns/${id}`),\n  downloadReturn: id => api.get(`/tax/returns/${id}/download`, {\n    responseType: 'blob'\n  })\n};\nexport const documentAPI = {\n  getDocuments: returnId => api.get('/documents', {\n    params: {\n      returnId\n    }\n  }),\n  uploadDocument: (file, returnId) => {\n    const formData = new FormData();\n    formData.append('document', file);\n    if (returnId) formData.append('returnId', returnId);\n    return api.post('/documents', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  deleteDocument: id => api.delete(`/documents/${id}`),\n  downloadDocument: id => api.get(`/documents/${id}/download`, {\n    responseType: 'blob'\n  })\n};\nexport const adminAPI = {\n  getUsers: params => api.get('/admin/users', {\n    params\n  }),\n  getUser: id => api.get(`/admin/users/${id}`),\n  updateUser: (id, data) => api.put(`/admin/users/${id}`, data),\n  deleteUser: id => api.delete(`/admin/users/${id}`),\n  getReturns: params => api.get('/admin/returns', {\n    params\n  }),\n  reviewReturn: (id, action, comment) => api.post(`/admin/returns/${id}/review`, {\n    action,\n    comment\n  }),\n  getAnalytics: params => api.get('/admin/analytics', {\n    params\n  }),\n  getSettings: () => api.get('/admin/settings'),\n  updateSettings: data => api.put('/admin/settings', data)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","API_TIMEOUT","parseInt","REACT_APP_API_TIMEOUT","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authAPI","login","email","password","post","signup","userData","logout","refreshToken","forgotPassword","resetPassword","userAPI","getProfile","get","updateProfile","data","put","changePassword","uploadAvatar","file","formData","FormData","append","taxAPI","getReturns","getReturn","id","createReturn","updateReturn","submitReturn","deleteReturn","delete","downloadReturn","responseType","documentAPI","getDocuments","returnId","params","uploadDocument","deleteDocument","downloadDocument","adminAPI","getUsers","getUser","updateUser","deleteUser","reviewReturn","action","comment","getAnalytics","getSettings","updateSettings"],"sources":["D:/Cursor/Equity Tax/src/utils/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\n// API Configuration\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\nconst API_TIMEOUT = parseInt(process.env.REACT_APP_API_TIMEOUT || '10000');\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: API_TIMEOUT,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle errors\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Unauthorized - clear token and redirect to login\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// API Endpoints\r\nexport const authAPI = {\r\n  login: (email: string, password: string) =>\r\n    api.post('/auth/login', { email, password }),\r\n  signup: (userData: any) =>\r\n    api.post('/auth/signup', userData),\r\n  logout: () =>\r\n    api.post('/auth/logout'),\r\n  refreshToken: () =>\r\n    api.post('/auth/refresh'),\r\n  forgotPassword: (email: string) =>\r\n    api.post('/auth/forgot-password', { email }),\r\n  resetPassword: (token: string, password: string) =>\r\n    api.post('/auth/reset-password', { token, password }),\r\n};\r\n\r\nexport const userAPI = {\r\n  getProfile: () =>\r\n    api.get('/user/profile'),\r\n  updateProfile: (data: any) =>\r\n    api.put('/user/profile', data),\r\n  changePassword: (data: any) =>\r\n    api.put('/user/change-password', data),\r\n  uploadAvatar: (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append('avatar', file);\r\n    return api.post('/user/avatar', formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' },\r\n    });\r\n  },\r\n};\r\n\r\nexport const taxAPI = {\r\n  getReturns: () =>\r\n    api.get('/tax/returns'),\r\n  getReturn: (id: string) =>\r\n    api.get(`/tax/returns/${id}`),\r\n  createReturn: (data: any) =>\r\n    api.post('/tax/returns', data),\r\n  updateReturn: (id: string, data: any) =>\r\n    api.put(`/tax/returns/${id}`, data),\r\n  submitReturn: (id: string) =>\r\n    api.post(`/tax/returns/${id}/submit`),\r\n  deleteReturn: (id: string) =>\r\n    api.delete(`/tax/returns/${id}`),\r\n  downloadReturn: (id: string) =>\r\n    api.get(`/tax/returns/${id}/download`, { responseType: 'blob' }),\r\n};\r\n\r\nexport const documentAPI = {\r\n  getDocuments: (returnId?: string) =>\r\n    api.get('/documents', { params: { returnId } }),\r\n  uploadDocument: (file: File, returnId?: string) => {\r\n    const formData = new FormData();\r\n    formData.append('document', file);\r\n    if (returnId) formData.append('returnId', returnId);\r\n    return api.post('/documents', formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' },\r\n    });\r\n  },\r\n  deleteDocument: (id: string) =>\r\n    api.delete(`/documents/${id}`),\r\n  downloadDocument: (id: string) =>\r\n    api.get(`/documents/${id}/download`, { responseType: 'blob' }),\r\n};\r\n\r\nexport const adminAPI = {\r\n  getUsers: (params?: any) =>\r\n    api.get('/admin/users', { params }),\r\n  getUser: (id: string) =>\r\n    api.get(`/admin/users/${id}`),\r\n  updateUser: (id: string, data: any) =>\r\n    api.put(`/admin/users/${id}`, data),\r\n  deleteUser: (id: string) =>\r\n    api.delete(`/admin/users/${id}`),\r\n  getReturns: (params?: any) =>\r\n    api.get('/admin/returns', { params }),\r\n  reviewReturn: (id: string, action: 'approve' | 'reject', comment?: string) =>\r\n    api.post(`/admin/returns/${id}/review`, { action, comment }),\r\n  getAnalytics: (params?: any) =>\r\n    api.get('/admin/analytics', { params }),\r\n  getSettings: () =>\r\n    api.get('/admin/settings'),\r\n  updateSettings: (data: any) =>\r\n    api.put('/admin/settings', data),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}